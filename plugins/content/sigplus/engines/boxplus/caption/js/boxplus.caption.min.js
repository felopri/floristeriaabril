/*
 boxplus mouse-over image caption engine
 @author  Levente Hunyadi
 @version 1.4.2
 @remarks Copyright (C) 2009-2010 Levente Hunyadi
 @remarks Licensed under GNU/GPLv3, see http://www.gnu.org/licenses/gpl-3.0.html
 @see     http://hunyadi.info.hu/projects/boxplus
*/
if(typeof __jQuery__=="undefined")var __jQuery__=jQuery;
(function(b){function l(a){a=a.parent("a");return a.size()?a.attr("href"):!1}function m(a){return a.attr("alt")}b.fn.boxplusCaption=function(a){a=b.extend({position:"overlay",download:l,caption:m,metadata:!1,dialog:!1},a);a=b.extend({alwaysOnTop:a.position=="figure"},a);var c=this,d=a.caption(c),e=a.download,f=a.metadata,g=a.dialog,i=e&&e(c);e=f&&f(c);f=i||e;if(!d&&!f)return this;var n=a.position=="figure",h=c.parent("a").size()?c.parent():c;c.attr("title","");var o=h.attr("title");h.hover(function(){h.removeAttr("title")},
function(){h.attr("title",o)});var j=b('<div class="boxplus-container" />').insertAfter(h),k=b('<div class="boxplus-imagecaption boxplus-hidden"></div>').addClass(n?"boxplus-figurecaption":"boxplus-overlaycaption").appendTo(j).html(d);f&&(d=b('<div class="boxplus-buttons" />'),i&&b('<div class="boxplus-download" />').appendTo(d).click(function(){window.location.href=i;return!1}),e&&g&&g(b('<div class="boxplus-metadata" />').appendTo(d),c),k.append(d));g=j.parent().mouseenter(function(){var a=c.offset();
j.css({width:c.outerWidth(),height:c.outerHeight()}).offset(a).offset(a);k.removeClass("boxplus-hidden")});a.alwaysOnTop||g.mouseleave(function(){k.addClass("boxplus-hidden")});g.mouseenter().mouseleave();return this};b.fn.boxplusCaptionGallery=function(a){b("li img:first-child",this).each(function(){b(this).boxplusCaption(a)});return this}})(__jQuery__);
