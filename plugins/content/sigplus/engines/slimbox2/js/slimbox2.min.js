/*

 Slimbox v2.05 - The ultimate lightweight Lightbox clone for jQuery
 (c) 2007-2013 Christophe Beyls <http://www.digitalia.be>
 MIT-style license.
*/
if("undefined"==typeof __jQuery__)var __jQuery__=jQuery;
(function(a){function B(){var b=l.scrollLeft(),c=l.width();a([d,p]).css("left",b+c/2);C&&a(m).css({left:b,top:l.scrollTop(),width:c,height:l.height()})}function D(b){b?a("object").add(E?"select":"embed").each(function(a,b){w[a]=[b,b.style.visibility];b.style.visibility="hidden"}):(a.each(w,function(a,b){b[0].style.visibility=b[1]}),w=[]);b=b?"bind":"unbind";l[b]("scroll resize",B);a(document)[b]("keydown",M)}function M(b){b=b.which;var d=a.inArray;return 0<=d(b,c.closeKeys)?x():0<=d(b,c.nextKeys)?
F():0<=d(b,c.previousKeys)?G():null}function G(){return y(q)}function F(){return y(r)}function y(a){0<=a&&(g=a,s=h[g][0],q=(g||(c.loop?h.length:0))-1,r=(g+1)%h.length||(c.loop?0:-1),H(),d.className="lbLoading",k=new Image,k.onload=N,k.src=s);return!1}function N(){d.className="";a(n).css({backgroundImage:"url("+s+")",visibility:"hidden",display:""});a(z).width(k.width);a([z,t,u]).height(k.height);a(I).html(h[g][1]||"");a(J).html((1<h.length&&c.counterText||"").replace(/{x}/,g+1).replace(/{y}/,h.length));
0<=q&&(K.src=h[q][0]);0<=r&&(L.src=h[r][0]);e=n.offsetWidth;f=n.offsetHeight;var b=Math.max(0,A-f/2);d.offsetHeight!=f&&a(d).animate({height:f,top:b},c.resizeDuration,c.resizeEasing);d.offsetWidth!=e&&a(d).animate({width:e,marginLeft:-e/2},c.resizeDuration,c.resizeEasing);a(d).queue(function(){a(p).css({width:e,top:b+f,marginLeft:-e/2,visibility:"hidden",display:""});a(n).css({display:"none",visibility:"",opacity:""}).fadeIn(c.imageFadeDuration,O)})}function O(){0<=q&&a(t).show();0<=r&&a(u).show();
a(v).css("marginTop",-v.offsetHeight).animate({marginTop:0},c.captionAnimationDuration);p.style.visibility=""}function H(){k.onload=null;k.src=K.src=L.src=s;a([d,n,v]).stop(!0);a([t,u,n,p]).hide()}function x(){0<=g&&(H(),g=q=r=-1,a(d).hide(),a(m).stop().fadeOut(c.overlayFadeDuration,D));return!1}var l=a(window),c,h,g=-1,s,q,r,C,A,e,f,E=!window.XMLHttpRequest,w=[],k={},K=new Image,L=new Image,m,d,n,z,t,u,p,v,I,J;a(function(){a("body").append(a([m=a('<div id="lbOverlay" />').click(x)[0],d=a('<div id="lbCenter" />')[0],
p=a('<div id="lbBottomContainer" />')[0]]).css("display","none"));n=a('<div id="lbImage" />').appendTo(d).append(z=a('<div style="position: relative;" />').append([t=a('<a id="lbPrevLink" href="#" />').click(G)[0],u=a('<a id="lbNextLink" href="#" />').click(F)[0]])[0])[0];v=a('<div id="lbBottom" />').appendTo(p).append([a('<a id="lbCloseLink" href="#" />').click(x)[0],I=a('<div id="lbCaption" />')[0],J=a('<div id="lbNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]});a.slimbox=function(b,
g,k){c=a.extend({loop:!1,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"{x}/{y}",closeKeys:[27],previousKeys:[37],nextKeys:[39]},k);"string"==typeof b&&(b=[[b,g]],g=0);A=l.scrollTop()+l.height()/2;e=c.initialWidth;f=c.initialHeight;a(d).css({top:Math.max(0,A-f/2),width:e,height:f,marginLeft:-e/2}).show();if(C=E||m.currentStyle&&"fixed"!=m.currentStyle.position)m.style.position=
"absolute";a(m).css("opacity",c.overlayOpacity).fadeIn(c.overlayFadeDuration);B();D(1);h=b;c.loop=c.loop&&1<h.length;return y(g)};a.fn.slimbox=function(b,c,d){c=c||function(a){return[a.href,a.title]};d=d||function(){return!0};var g=this;return g.unbind("click").click(function(){var h=this,k=0,e,f=0,l;e=a.grep(g,function(a,b){return d.call(h,a,b)});for(l=e.length;f<l;++f)e[f]==h&&(k=f),e[f]=c(e[f],f);return a.slimbox(e,k,b)})}})(__jQuery__);
